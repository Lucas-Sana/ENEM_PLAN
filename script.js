const plannerData = [
  {
    week: 'Semana 1',
    days: [
      {
        day: 'Dia 1',
        events: [
          {
            subject: 'Português',
            topic: 'Tipos de Textos (Narrativos e Descritivos)',
            revision: 'Definição, características e exemplos.',
            practice: 'Ler e interpretar contos e descrições detalhadas.'
          },
          {
            subject: 'Matemática',
            topic: 'Operações Básicas - Adição e Subtração',
            revision: 'Definições e exemplos de adição e subtração.',
            practice: 'Resolver exercícios básicos e contextualizados.'
          }
        ]
      },
      {
        day: 'Dia 2',
        events: [
          {
            subject: 'Português',
            topic: 'Tipos de Textos (Dissertativos e Expositivos)',
            revision: 'Estrutura e propósito de cada tipo.',
            practice: 'Ler redações e artigos científicos.'
          },
          {
            subject: 'Matemática',
            topic: 'Operações Básicas - Multiplicação e Divisão',
            revision: 'Definições e exemplos de multiplicação e divisão.',
            practice: 'Resolver exercícios e problemas aplicados.'
          }
        ]
      },
      {
        day: 'Dia 3',
        events: [
          {
            subject: 'Português',
            topic: 'Tipos de Textos (Injuntivos)',
            revision: 'Características e uso.',
            practice: 'Analisar receitas e manuais.'
          },
          {
            subject: 'Matemática',
            topic: 'Frações - Representação e Operações Básicas',
            revision: 'Conceito de fração, adição e subtração de frações.',
            practice: 'Exercícios com frações, incluindo simplificação.'
          }
        ]
      },
      {
        day: 'Dia 4',
        events: [
          {
            subject: 'Português',
            topic: 'Estrutura Textual (Introdução, Desenvolvimento e Conclusão)',
            revision: 'Componentes básicos de textos dissertativos.',
            practice: 'Escrever pequenos textos utilizando a estrutura.'
          },
          {
            subject: 'Matemática',
            topic: 'Frações - Multiplicação e Divisão',
            revision: 'Conceito e operações de multiplicação e divisão de frações.',
            practice: 'Resolver problemas envolvendo multiplicação e divisão de frações.'
          }
        ]
      },
      {
        day: 'Dia 5',
        events: [
          {
            subject: 'Português',
            topic: 'Coesão (Elementos de Ligação)',
            revision: 'Pronomes, conjunções, sinônimos e elipses.',
            practice: 'Exercícios de ligação de ideias em parágrafos.'
          },
          {
            subject: 'Matemática',
            topic: 'Decimais e Porcentagens - Conceitos e Conversões',
            revision: 'Conversão entre frações, decimais e porcentagens.',
            practice: 'Exercícios de conversão e cálculo de porcentagens.'
          }
        ]
      },
      {
        day: 'Dia 6',
        events: [
          {
            subject: 'Português',
            topic: 'Coerência e Inferência',
            revision: 'Lógica e clareza na sequência das ideias.',
            practice: 'Fazer inferências a partir de textos dados.'
          },
          {
            subject: 'Matemática',
            topic: 'Porcentagens - Cálculo e Aplicações',
            revision: 'Cálculo de porcentagens em diferentes contextos.',
            practice: 'Resolver problemas aplicados sobre porcentagens.'
          }
        ]
      }
    ]
  },
  {
    week: 'Semana 2',
    days: [
      {
        day: 'Dia 1',
        events: [
          {
            subject: 'História',
            topic: 'Descobrimento do Brasil (1500)',
            revision: 'Chegada dos portugueses, liderados por Pedro Álvares Cabral.',
            practice: 'Ler e fazer resumos de textos sobre o descobrimento.'
          },
          {
            subject: 'Física',
            topic: 'Cinemática (Velocidade e Aceleração)',
            revision: 'Definições e fórmulas de velocidade (v = d/t) e aceleração (a = Δv/Δt).',
            practice: 'Resolver problemas básicos sobre movimento uniforme e acelerado.'
          }
        ]
      },
      {
        day: 'Dia 2',
        events: [
          {
            subject: 'História',
            topic: 'Economia Açucareira (séculos XVI-XVII)',
            revision: 'Produção de açúcar no Nordeste brasileiro.',
            practice: 'Mapear as principais regiões produtoras e suas características.'
          },
          {
            subject: 'Física',
            topic: 'Dinâmica (Leis de Newton - Inércia)',
            revision: 'Primeira Lei de Newton (Lei da Inércia).',
            practice: 'Exemplos e exercícios sobre a aplicação da lei da inércia.'
          }
        ]
      },
      {
        day: 'Dia 3',
        events: [
          {
            subject: 'História',
            topic: 'Mineração (século XVIII)',
            revision: 'Ciclo do ouro em Minas Gerais.',
            practice: 'Analisar os impactos econômicos e sociais da mineração.'
          },
          {
            subject: 'Física',
            topic: 'Dinâmica (Leis de Newton - Força e Aceleração)',
            revision: 'Segunda Lei de Newton (F = ma).',
            practice: 'Resolver problemas que envolvem a aplicação da segunda lei.'
          }
        ]
      },
      {
        day: 'Dia 4',
        events: [
          {
            subject: 'História',
            topic: 'Movimentos de Resistência',
            revision: 'Quilombos, como o de Palmares, e revoltas como a Inconfidência Mineira.',
            practice: 'Pesquisar sobre os líderes e consequências desses movimentos.'
          },
          {
            subject: 'Física',
            topic: 'Dinâmica (Leis de Newton - Ação e Reação)',
            revision: 'Terceira Lei de Newton (Ação e Reação).',
            practice: 'Exemplos e exercícios sobre forças de ação e reação.'
          }
        ]
      },
      {
        day: 'Dia 5',
        events: [
          {
            subject: 'História',
            topic: 'Revisão e Exercícios Práticos',
            revision: 'Revisão dos tópicos estudados durante a semana.',
            practice: 'Responder questões de vestibulares sobre o período colonial.'
          },
          {
            subject: 'Física',
            topic: 'Revisão de Cinemática e Dinâmica',
            revision: 'Revisão dos tópicos estudados durante a semana.',
            practice: 'Responder questões de vestibulares sobre cinemática e dinâmica.'
          }
        ]
      },
      {
        day: 'Dia 6',
        events: [
          {
            subject: 'História',
            topic: 'Independência do Brasil (1822)',
            revision: 'Proclamada por Dom Pedro I.',
            practice: 'Analisar os fatores que levaram à independência.'
          },
          {
            subject: 'Física',
            topic: 'Estática (Equilíbrio de Corpos)',
            revision: 'Conceito de equilíbrio estático (∑F = 0).',
            practice: 'Resolver problemas sobre equilíbrio de forças.'
          }
        ]
      }
    ]
  },
  // Continue adicionando semanas e dias conforme necessário
];

let currentDayIndex = parseInt(localStorage.getItem('currentDayIndex')) || 0;
let clickedEvents = JSON.parse(localStorage.getItem('clickedEvents')) || {};

function createPlanner(plannerData) {
  const plannerDiv = document.getElementById('planner');
  plannerDiv.innerHTML = '';
  const dayData = getCurrentDayData(plannerData);

  const dayDiv = document.createElement('div');
  dayDiv.classList.add('day');
  const dayTitle = document.createElement('h3');
  dayTitle.textContent = `${dayData.week} - ${dayData.day.day}`;
  dayDiv.appendChild(dayTitle);

  dayData.day.events.forEach((event, index) => {
    const eventDiv = document.createElement('div');
    eventDiv.classList.add('event');

    const eventTitle = document.createElement('div');
    eventTitle.classList.add('event-title');
    eventTitle.textContent = `${event.subject} - ${event.topic}`;
    eventDiv.appendChild(eventTitle);

    const eventRevision = document.createElement('div');
    eventRevision.classList.add('event-description');
    eventRevision.textContent = `Revisão: ${event.revision}`;
    eventDiv.appendChild(eventRevision);

    const eventPractice = document.createElement('div');
    eventPractice.classList.add('event-description');
    eventPractice.textContent = `Prática: ${event.practice}`;
    eventDiv.appendChild(eventPractice);

    const eventKey = `${currentDayIndex}-${index}`;

    if (clickedEvents[eventKey]) {
      eventDiv.classList.add('clicked');
    }

    eventDiv.addEventListener('click', () => {
      eventDiv.classList.toggle('clicked');
      clickedEvents[eventKey] = eventDiv.classList.contains('clicked');
      localStorage.setItem('clickedEvents', JSON.stringify(clickedEvents));
    });

    dayDiv.appendChild(eventDiv);
  });

  plannerDiv.appendChild(dayDiv);
  updateButtonsVisibility();
}

function getCurrentDayData(plannerData) {
  let totalDays = 0;
  for (let i = 0; i < plannerData.length; i++) {
    const week = plannerData[i];
    for (let j = 0; j < week.days.length; j++) {
      if (totalDays === currentDayIndex) {
        return { week: week.week, dayIndex: j, day: week.days[j] };
      }
      totalDays++;
    }
  }
  return null;
}

function updateButtonsVisibility() {
  const prevDayButton = document.getElementById('prevDayButton');
  const nextDayButton = document.getElementById('nextDayButton');

  prevDayButton.style.visibility = currentDayIndex > 0 ? 'visible' : 'hidden';

  const totalDays = plannerData.reduce((sum, week) => sum + week.days.length, 0);
  nextDayButton.style.visibility = currentDayIndex < totalDays - 1 ? 'visible' : 'hidden';
}

document.getElementById('nextDayButton').addEventListener('click', () => {
  currentDayIndex++;
  localStorage.setItem('currentDayIndex', currentDayIndex);
  createPlanner(plannerData);
});

document.getElementById('prevDayButton').addEventListener('click', () => {
  if (currentDayIndex > 0) {
    currentDayIndex--;
    localStorage.setItem('currentDayIndex', currentDayIndex);
    createPlanner(plannerData);
  }
});

document.addEventListener('DOMContentLoaded', () => {
  createPlanner(plannerData);
});
